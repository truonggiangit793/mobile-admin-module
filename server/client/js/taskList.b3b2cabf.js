"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[456],{1563:function(t,s,a){a.r(s),a.d(s,{default:function(){return y}});var e=function(){var t=this,s=t._self._c;return s("main",[s("Loading",{attrs:{active:t.isLoading,"is-full-page":!0,"can-cancel":!1}}),s("div",{staticClass:"flex items-center mb-4 text-green-700 font-bold text-lg uppercase"},[s("ThemifyIcon",{attrs:{icon:"menu"}}),s("h1",{staticClass:"ml-2"},[t._v("Task list management")])],1),s("div",{staticClass:"mb-6"},[s("div",{staticClass:"mb-2 text-md font-medium text-gray-900 flex items-center"},[s("ThemifyIcon",{attrs:{icon:"settings"}}),s("p",{staticClass:"ml-2"},[t._v("Start to create a new task:")])],1),s("div",{staticClass:"flex mb-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.taskName,expression:"taskName"}],staticClass:"block w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 pl-2 py-2 mr-4",attrs:{placeholder:"Enter task name...",type:"text"},domProps:{value:t.taskName},on:{input:function(s){s.target.composing||(t.taskName=s.target.value)}}}),s("div",{staticClass:"flex justify-center items-center transition-all bg-green-400 hover:bg-green-500 text-white w-80 text-center rounded cursor-pointer",on:{click:t.newTaskHandler}},[s("ThemifyIcon",{attrs:{icon:"plus"}}),s("button",{staticClass:"ml-2"},[t._v("New task")])],1)])]),s("div",{staticClass:"mb-2 text-md font-medium text-gray-900 flex items-center"},[s("ThemifyIcon",{attrs:{icon:"settings"}}),s("p",{staticClass:"ml-2"},[t._v("List of all tasks:")])],1),s("div",{staticClass:"flex items-center mb-4 text-gray-700 font-bold uppercase"},[s("h1",{staticClass:"ml-2"},[t._v("Total task: "+t._s(t.totalTask))])]),s("div",{staticClass:"overflow-x-auto relative"},[s("table",{staticClass:"overflow-scroll w-full text-sm text-left text-gray-500 dark:text-gray-400"},[s("thead",{staticClass:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[s("tr",[s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Task name")]),s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Members")]),s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Created At")]),s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Last modified")]),"ADMIN"==t.payload.role?s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Remove")]):t._e(),"ADMIN"==t.payload.role?s("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("Mark done")]):t._e(),"ADMIN"==t.payload.role?s("th",{staticClass:"py-3 px-6 bg-",attrs:{scope:"col"}},[t._v("Export")]):t._e()])]),t.taskList&&t.taskList.data.length>0?s("tbody",t._l(t.taskList.data,(function(a,e){return s("tr",{key:e,class:{"bg-green-100 border-b":a.isDone,"bg-yellow-100 border-b":!a.isDone}},["ADMIN"==t.payload.role?s("router-link",{attrs:{to:"/task/"+a.taskID}},[s("th",{staticClass:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",attrs:{scope:"row"}},[t._v(" "+t._s(a.taskName)+" ")])]):t._e(),s("td",{staticClass:"py-4 px-6"},[t._v(t._s(a.memberList.length))]),s("td",{staticClass:"py-4 px-6"},[t._v(t._s(t.dateFormat(a.createdAt)))]),s("td",{staticClass:"py-4 px-6"},[t._v(t._s(t.dateFormat(a.updatedAt)))]),"ADMIN"==t.payload.role?s("td",{staticClass:"py-4 px-6",on:{click:function(s){return t.taskRemoveHandler(a.taskID)}}},[s("div",{staticClass:"text-red-500 cursor-pointer flex items-center"},[s("ThemifyIcon",{attrs:{icon:"trash"}}),s("p",{staticClass:"ml-1"},[t._v("Delete")])],1)]):t._e(),"ADMIN"==t.payload.role&&a.isDone?s("td",{staticClass:"py-4 px-6"},[s("div",{staticClass:"text-gray-500 flex items-center"},[s("ThemifyIcon",{attrs:{icon:"check"}}),s("p",{staticClass:"ml-1"},[t._v("Mark done")])],1)]):t._e(),"ADMIN"!=t.payload.role||a.isDone?t._e():s("td",{staticClass:"py-4 px-6",on:{click:function(s){return t.taskMarkDoneHandler(a.taskID)}}},[s("div",{staticClass:"text-green-500 cursor-pointer flex items-center"},[s("ThemifyIcon",{attrs:{icon:"check"}}),s("p",{staticClass:"ml-1"},[t._v("Mark done")])],1)]),"ADMIN"==t.payload.role&&a.isDone?s("td",{staticClass:"py-4 px-6",on:{click:function(s){return t.taskExportHandler(a.taskID)}}},[s("div",{staticClass:"text-blue-500 cursor-pointer flex items-center"},[s("ThemifyIcon",{attrs:{icon:"export"}}),s("p",{staticClass:"ml-1"},[t._v("Export")])],1)]):t._e(),"ADMIN"!=t.payload.role||a.isDone?t._e():s("td",{staticClass:"py-4 px-6"},[s("div",{staticClass:"text-gray-500 flex items-center"},[s("ThemifyIcon",{attrs:{icon:"export"}}),s("p",{staticClass:"ml-1"},[t._v("Export")])],1)])],1)})),0):t._e()]),t.taskList?t._e():s("div",{staticClass:"flex w-full justify-center p-8"},[s("h1",{},[t._v("Empty list, there is no data!")])])])],1)},i=[],o=a(594),l=a(7973),n=a(629),r=a(7398),c=a.n(r),d=a(8510),p={data(){return{taskName:"",isLoading:!0,taskList:null,totalTask:0}},async mounted(){this.fetchData()},methods:{dateFormat:d.Z,async fetchData(){this.isLoading=!0,await o.Z.get(`http://localhost:8080/api/v1/task/get-all?token=${this.accessToken}`).then((t=>{console.log(t.data),t.data.status?(this.taskList=t.data.result,this.totalTask=t.data.result.total):(this.taskList=null,this.totalTask=0)})).catch((()=>{this.taskList=null})),this.isLoading=!1},async taskRemoveHandler(t){this.isLoading=!0,await o.Z["delete"](`http://localhost:8080/api/v1/task/${t}/delete?token=${this.accessToken}`).then((t=>{t.data.status&&this.toastify.success(t.data.msg.en)})).catch((t=>{this.toastify.error(t.response.data.msg.en)})),this.fetchData(),this.isLoading=!1},async taskMarkDoneHandler(t){this.isLoading=!0,await o.Z.post(`http://localhost:8080/api/v1/task/${t}/mark-done?token=${this.accessToken}`).then((t=>{t.data.status?this.toastify.success(t.data.msg.en):this.toastify.error(t.data.msg.en)})).catch((t=>{this.toastify.error(t.response.data.msg.en)})),this.fetchData(),this.isLoading=!1},async newTaskHandler(){this.isLoading=!0,await o.Z.post(`http://localhost:8080/api/v1/task/new?token=${this.accessToken}`,{taskName:this.taskName}).then((t=>{t.data.status?this.toastify.success(t.data.msg.en):this.toastify.error(t.data.msg.en)})).catch((t=>{this.toastify.error(t.response.data.msg.en)})),this.taskName="",this.fetchData(),this.isLoading=!1},async taskExportHandler(t){this.isLoading=!0;const s=new Date;await(0,o.Z)({url:`http://localhost:8080/api/v1/task/${t}/export?token=${this.accessToken}`,method:"POST",responseType:"blob"}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),e=document.createElement("a");e.href=a;const i=`product-list-${s}.xlsx`;e.setAttribute("download",i),e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),e.remove()})),this.isLoading=!1}},computed:{...(0,n.rn)(["accessToken","payload","toastify"])},components:{ThemifyIcon:l.Z,Loading:c()}},h=p,m=a(1001),k=(0,m.Z)(h,e,i,!1,null,null,null),y=k.exports}}]);
//# sourceMappingURL=taskList.b3b2cabf.js.map